<script>
  import { onMount } from "svelte";

  export let data = [];
  export let labels = [];

  let chartCanvas;

  onMount(async () => {
    const ctx = chartCanvas.getContext("2d");
    // BUG: Await import because it doesn't work otherwise in production
    // https://github.com/sveltejs/kit/issues/5535#issuecomment-1251881206
    const { Chart, registerables } = await import("chart.js");
    Chart.register(...registerables);
    new Chart(ctx, {
      type: "doughnut",
      data: {
        labels,
        datasets: [
          {
            label: "Caracter√≠sticas",
            data,
            backgroundColor: ["#4c51bf", "#ed64a6", "#4299e1"],
            hoverOffset: 4,
          },
        ],
      },
      options: {
        cutout: "70%",
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: "right",
            labels: {
              color: "#6b7280",
              usePointStyle: true,
              pointStyle: "rectRounded",
              boxWidth: 10,
              font: {
                size: 14,
              },
            },
          },
        },
      },
    });
  });
</script>

<canvas bind:this={chartCanvas} />
